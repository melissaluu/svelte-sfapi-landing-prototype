import{c as b,s as x,J as p,N as q,a as d,K as m,f as l,b as h,m as $,d as k}from"./urql-core-1b38caef.js";import{w as C}from"./index-cc9c1da0.js";import{F as O,Q as j,r as w}from"./index-86598e45.js";function f(){return(f=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n}).apply(this,arguments)}function F(n,i,a){var e={query:n,variables:i||null,context:a},t={stale:!1,fetching:!1,data:void 0,error:void 0,extensions:void 0},s=C(t),v=!1;return t.set=function(r){if(!(!r||r===t)){v=!0;var c=!1;if("query"in r||"variables"in r){var y=b(e.query,e.variables),g=b(r.query||e.query,r.variables||e.variables);y.key!==g.key&&(c=!0,e.query=r.query||e.query,e.variables=r.variables||e.variables||null)}"context"in r&&x(e.context)!==x(r.context)&&(c=!0,e.context=r.context);for(var o in r)o==="query"||o==="variables"||o==="context"||(o==="fetching"?t[o]=!!r[o]:o in t&&(t[o]=r[o]),c=!0);t.stale=!!r.stale,v=!1,c&&s.set(t)}},t.update=function(r){t.set(r(t))},t.subscribe=function(r,c){return s.subscribe(r,c)},t.reexecute=function(u){e.context=f({},u||e.context),s.set(t)},Object.keys(e).forEach(function(u){Object.defineProperty(t,u,{configurable:!1,get:function(){return e[u]},set:function(c){e[u]=c,v||s.set(t)}})}),t}function _(){return O("$$_urql")}function P(n){w("$$_urql",n)}function J(n){var i=new p(n);return P(i),i}var Q={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0};function S(n){return k(function(i){var a,e={};return n.subscribe(function(t){var s=b(t.query,t.variables);((s.context=t.context)!==e||s.key!==a)&&(a=s.key,e=t.context,i.next(s))})})}function K(n){var i=_(),a=q(function(e){n.set(e)})(d(function(e,t){return f({},e,t)},Q)(m(function(e){return e.context&&e.context.pause?l({fetching:!1,stale:!1}):h([l({fetching:!0,stale:!1}),$(function(t){return f({},{fetching:!1},t,{stale:!!t.stale})})(i.executeQuery(e,e.context)),l({fetching:!1,stale:!1})])})(S(n))));return j(a.unsubscribe),n}export{J as i,F as o,K as q};
