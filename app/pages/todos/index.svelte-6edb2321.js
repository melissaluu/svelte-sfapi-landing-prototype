import{Q as x,S as de,i as ce,s as fe,e as g,k as O,c as b,a as P,m as N,d as T,b as n,G as le,g as ee,H as c,R as Q,T as he,U as _e,V as pe,W as me,X as oe,Y as ve,t as ge,O as be,h as ye,Z as Te,p as Ee,q as ke,o as we,n as Ue,_ as Me,E as Oe}from"../../chunks/index-f715f2a8.js";import{c as A}from"../../chunks/singletons-d1fb5791.js";import{b as W}from"../../chunks/paths-396f020f.js";A.disable_scroll_handling;A.goto;const Ne=A.invalidate;A.prefetch;A.prefetch_routes;A.before_navigate;A.after_navigate;function X(i,{pending:e,error:t,result:a}={}){let f;async function v(_){const s=f={};_.preventDefault();const u=new FormData(i);e&&e({data:u,form:i});try{const h=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:u});if(s!==f)return;if(h.ok){a&&a({data:u,form:i,response:h});const o=new URL(i.action);o.search=o.hash="",Ne(o.href)}else t?t({data:u,form:i,error:null,response:h}):console.error(await h.text())}catch(h){if(t&&h instanceof Error)t({data:u,form:i,error:h,response:null});else throw h}}return i.addEventListener("submit",v),{destroy(){i.removeEventListener("submit",v)}}}function ue(i){const e=i-1;return e*e*e+1}function se(i,{delay:e=0,duration:t=400,easing:a=ue,start:f=0,opacity:v=0}={}){const _=getComputedStyle(i),s=+_.opacity,u=_.transform==="none"?"":_.transform,h=1-f,o=s*(1-v);return{delay:e,duration:t,easing:a,css:(w,E)=>`
			transform: ${u} scale(${1-h*E});
			opacity: ${s-o*E}
		`}}function Ie(i,{from:e,to:t},a={}){const f=getComputedStyle(i),v=f.transform==="none"?"":f.transform,[_,s]=f.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*_/t.width-(t.left+_),h=e.top+e.height*s/t.height-(t.top+s),{delay:o=0,duration:w=U=>Math.sqrt(U)*120,easing:E=ue}=a;return{delay:o,duration:x(w)?w(Math.sqrt(u*u+h*h)):w,easing:E,css:(U,p)=>{const y=p*u,$=p*h,r=U+p*e.width/t.width,l=U+p*e.height/t.height;return`transform: ${v} translate(${y}px, ${$}px) scale(${r}, ${l});`}}}function re(i,e,t){const a=i.slice();return a[3]=e[t],a[4]=e,a[5]=t,a}function ie(i,e){let t,a,f,v,_,s,u,h,o,w,E,U,p,y,$,r,l,d,S,R,q,I,C,L,Y,D,V,j,Z,F,z,J=Oe,M,K,te;function ae(...k){return e[1](e[3],e[4],e[5],...k)}function ne(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=g("div"),a=g("form"),f=g("input"),_=O(),s=g("input"),h=O(),o=g("button"),U=O(),p=g("form"),y=g("input"),r=O(),l=g("input"),S=O(),R=g("button"),q=O(),I=g("form"),C=g("input"),Y=O(),D=g("button"),Z=O(),this.h()},l(k){t=b(k,"DIV",{class:!0});var m=P(t);a=b(m,"FORM",{action:!0,method:!0});var B=P(a);f=b(B,"INPUT",{type:!0,name:!0,class:!0}),_=N(B),s=b(B,"INPUT",{type:!0,name:!0,class:!0}),h=N(B),o=b(B,"BUTTON",{class:!0,"aria-label":!0}),P(o).forEach(T),B.forEach(T),U=N(m),p=b(m,"FORM",{class:!0,action:!0,method:!0});var H=P(p);y=b(H,"INPUT",{type:!0,name:!0,class:!0}),r=N(H),l=b(H,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),S=N(H),R=b(H,"BUTTON",{class:!0,"aria-label":!0}),P(R).forEach(T),H.forEach(T),q=N(m),I=b(m,"FORM",{action:!0,method:!0});var G=P(I);C=b(G,"INPUT",{type:!0,name:!0,class:!0}),Y=N(G),D=b(G,"BUTTON",{class:!0,"aria-label":!0}),P(D).forEach(T),G.forEach(T),Z=N(m),m.forEach(T),this.h()},h(){n(f,"type","hidden"),n(f,"name","uid"),f.value=v=e[3].uid,n(f,"class","svelte-16nsat"),n(s,"type","hidden"),n(s,"name","done"),s.value=u=e[3].done?"":"true",n(s,"class","svelte-16nsat"),n(o,"class","toggle svelte-16nsat"),n(o,"aria-label",w="Mark todo as "+(e[3].done?"not done":"done")),n(a,"action",`/${W}/todos?_method=PATCH`),n(a,"method","post"),n(y,"type","hidden"),n(y,"name","uid"),y.value=$=e[3].uid,n(y,"class","svelte-16nsat"),n(l,"aria-label","Edit todo"),n(l,"type","text"),n(l,"name","text"),l.value=d=e[3].text,n(l,"class","svelte-16nsat"),n(R,"class","save svelte-16nsat"),n(R,"aria-label","Save todo"),n(p,"class","text svelte-16nsat"),n(p,"action",`/${W}/todos?_method=PATCH`),n(p,"method","post"),n(C,"type","hidden"),n(C,"name","uid"),C.value=L=e[3].uid,n(C,"class","svelte-16nsat"),n(D,"class","delete svelte-16nsat"),n(D,"aria-label","Delete todo"),D.disabled=V=e[3].pending_delete,n(I,"action",`/${W}/todos?_method=DELETE`),n(I,"method","post"),n(t,"class","todo svelte-16nsat"),le(t,"done",e[3].done),this.first=t},m(k,m){ee(k,t,m),c(t,a),c(a,f),c(a,_),c(a,s),c(a,h),c(a,o),c(t,U),c(t,p),c(p,y),c(p,r),c(p,l),c(p,S),c(p,R),c(t,q),c(t,I),c(I,C),c(I,Y),c(I,D),c(t,Z),M=!0,K||(te=[Q(E=X.call(null,a,{pending:ae})),Q(X.call(null,p)),Q(j=X.call(null,I,{pending:ne}))],K=!0)},p(k,m){e=k,(!M||m&1&&v!==(v=e[3].uid))&&(f.value=v),(!M||m&1&&u!==(u=e[3].done?"":"true"))&&(s.value=u),(!M||m&1&&w!==(w="Mark todo as "+(e[3].done?"not done":"done")))&&n(o,"aria-label",w),E&&x(E.update)&&m&1&&E.update.call(null,{pending:ae}),(!M||m&1&&$!==($=e[3].uid))&&(y.value=$),(!M||m&1&&d!==(d=e[3].text)&&l.value!==d)&&(l.value=d),(!M||m&1&&L!==(L=e[3].uid))&&(C.value=L),(!M||m&1&&V!==(V=e[3].pending_delete))&&(D.disabled=V),j&&x(j.update)&&m&1&&j.update.call(null,{pending:ne}),m&1&&le(t,"done",e[3].done)},r(){z=t.getBoundingClientRect()},f(){he(t),J(),_e(t,z)},a(){J(),J=pe(t,z,Ie,{duration:200})},i(k){M||(k&&me(()=>{F||(F=oe(t,se,{start:.7},!0)),F.run(1)}),M=!0)},o(k){k&&(F||(F=oe(t,se,{start:.7},!1)),F.run(0)),M=!1},d(k){k&&T(t),k&&F&&F.end(),K=!1,ve(te)}}}function Pe(i){let e,t,a,f,v,_,s,u,h,o=[],w=new Map,E,U,p,y=i[0];const $=r=>r[3].uid;for(let r=0;r<y.length;r+=1){let l=re(i,y,r),d=$(l);w.set(d,o[r]=ie(d,l))}return{c(){e=g("meta"),t=O(),a=g("div"),f=g("h1"),v=ge("Todos"),_=O(),s=g("form"),u=g("input"),h=O();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){const l=be('[data-svelte="svelte-aw2gey"]',document.head);e=b(l,"META",{name:!0,content:!0}),l.forEach(T),t=N(r),a=b(r,"DIV",{class:!0});var d=P(a);f=b(d,"H1",{});var S=P(f);v=ye(S,"Todos"),S.forEach(T),_=N(d),s=b(d,"FORM",{class:!0,action:!0,method:!0});var R=P(s);u=b(R,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),R.forEach(T),h=N(d);for(let q=0;q<o.length;q+=1)o[q].l(d);d.forEach(T),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(u,"name","text"),n(u,"aria-label","Add todo"),n(u,"placeholder","+ tap to add a todo"),n(u,"class","svelte-16nsat"),n(s,"class","new svelte-16nsat"),n(s,"action",`/${W}/todos`),n(s,"method","post"),n(a,"class","todos svelte-16nsat")},m(r,l){c(document.head,e),ee(r,t,l),ee(r,a,l),c(a,f),c(f,v),c(a,_),c(a,s),c(s,u),c(a,h);for(let d=0;d<o.length;d+=1)o[d].m(a,null);E=!0,U||(p=Q(X.call(null,s,{result:$e})),U=!0)},p(r,[l]){if(l&1){y=r[0],Ue();for(let d=0;d<o.length;d+=1)o[d].r();o=Te(o,l,$,1,r,y,w,a,Me,ie,null,re);for(let d=0;d<o.length;d+=1)o[d].a();Ee()}},i(r){if(!E){for(let l=0;l<y.length;l+=1)ke(o[l]);E=!0}},o(r){for(let l=0;l<o.length;l+=1)we(o[l]);E=!1},d(r){T(e),r&&T(t),r&&T(a);for(let l=0;l<o.length;l+=1)o[l].d();U=!1,p()}}}const $e=async({form:i})=>{i.reset()};function Re(i,e,t){let{todos:a}=e;const f=(_,s,u,{data:h})=>{t(0,s[u].done=!!h.get("done"),a)},v=(_,s,u)=>t(0,s[u].pending_delete=!0,a);return i.$$set=_=>{"todos"in _&&t(0,a=_.todos)},[a,f,v]}class qe extends de{constructor(e){super(),ce(this,e,Re,Pe,fe,{todos:0})}}export{qe as default};
